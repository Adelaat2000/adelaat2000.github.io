<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>Our Beautiful Dates</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            color: #333;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }

        @media (hover: hover) and (pointer: fine) {
            body {
                cursor: none;
            }
        }
    
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            text-align: center;
            padding: 55px 20px 20px 20px;
            position: relative;
        }

        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 15;
        }

        /* UNIFIED BUTTON STYLING - Based on original language button design */
        .btn-unified {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #ff6b9d;
            color: #ff6b9d;
            padding: 10px 18px;
            font-size: 0.9rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            backdrop-filter: blur(10px);
            min-height: 44px;
            min-width: 44px;
            
            /* Universal resets for consistent rendering */
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-sizing: border-box;
            font-family: inherit;
            line-height: 1;
            text-align: center;
            vertical-align: baseline;
            margin: 0;
            outline: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            z-index: 15;
        }

        .btn-unified.active {
            background: #ff6b9d;
            color: white;
            box-shadow: 0 4px 12px rgba(255, 107, 157, 0.4);
        }

        @media (hover: hover) and (pointer: fine) {
            .btn-unified:hover {
                background: #ff6b9d;
                color: white;
                transform: scale(1.05);
            }
        }

        /* Position-specific styles */
        .btn-back {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .heart {
            font-size: clamp(2.5rem, 10vw, 3.5rem);
            animation: heartBeat 1.2s infinite;
            z-index: 10;
            filter: drop-shadow(0 4px 8px rgba(255, 105, 180, 0.4));
            margin-bottom: 1rem;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        h1 {
            font-size: clamp(1.8rem, 6vw, 2.8rem);
            margin-bottom: 0.5em;
            line-height: 1.2;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fa3 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(255, 105, 180, 0.3);
            padding: 0 10px;
        }

        .subtitle {
            font-size: clamp(1rem, 3vw, 1.3rem);
            margin-bottom: 2rem;
            color: #ff6b9d;
            font-weight: 600;
            opacity: 0.8;
        }

        .dates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            width: 100%;
            margin-top: 2rem;
            padding: 0 20px;
        }

        .date-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 
                0 20px 40px rgba(255, 105, 180, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 107, 157, 0.2);
            animation: floatGently 6s ease-in-out infinite;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .date-card:nth-child(even) {
            animation-delay: -3s;
        }

        @keyframes floatGently {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }

        .date-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 
                0 25px 50px rgba(255, 105, 180, 0.4),
                0 15px 30px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .date-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 107, 157, 0.6);
            font-size: 3rem;
        }

        .date-card:hover .date-image {
            transform: scale(1.05);
        }

        .date-title {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fa3 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .date-info {
            font-size: 1rem;
            color: #ff6b9d;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .date-description {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.5;
            margin-top: 10px;
        }

        .sparkle {
            position: absolute;
            color: #fff;
            font-size: clamp(1rem, 5vw, 1.5rem);
            opacity: 0.8;
            animation: sparkle 3s infinite;
            pointer-events: none;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.8; transform: scale(1) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
        }

        .sparkle:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .sparkle:nth-child(2) { top: 30%; right: 15%; animation-delay: 0.5s; }
        .sparkle:nth-child(3) { bottom: 25%; left: 20%; animation-delay: 1s; }
        .sparkle:nth-child(4) { bottom: 35%; right: 10%; animation-delay: 1.5s; }
        .sparkle:nth-child(5) { top: 50%; left: 5%; animation-delay: 2s; }
        .sparkle:nth-child(6) { top: 60%; right: 5%; animation-delay: 2.5s; }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }

        .floating-heart {
            position: absolute;
            bottom: -50px;
            font-size: 1.8rem;
            color: #ff6b9d;
            opacity: 0;
            animation-name: floatUp;
            animation-timing-function: ease-out;
            animation-iteration-count: 1;
            filter: drop-shadow(0 2px 4px rgba(255, 107, 157, 0.3));
            animation-fill-mode: forwards;
            will-change: transform;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.9;
            }
            100% {
                transform: translateY(-120vh) scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }

        #heart-cursor {
            position: fixed;
            pointer-events: none;
            font-size: clamp(20px, 4vw, 28px);
            color: #ff6b9d;
            user-select: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease-out;
            z-index: 30;
            filter: drop-shadow(0 0 4px #ff8fa3);
            display: block;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            cursor: default;
        }

        .modal-content {
            position: relative;
            margin: 5% auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(255, 105, 180, 0.4);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 107, 157, 0.2);
            box-sizing: border-box;
        }

        .modal-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 20px;
            cursor: default;
        }

        .close {
            position: absolute;
            top: -15px;
            right: 5px;
            color: #ff6b9d;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            z-index: 101;
        }

        .close:hover {
            color: #ff8fa3;
        }

        .loading-placeholder {
            color: rgba(255, 107, 157, 0.4);
            font-size: 0.9rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                padding: 90px 15px 15px 15px;
            }

            .dates-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                padding: 0 15px;
            }

            .language-selector {
                top: 15px;
                right: 15px;
                gap: 8px;
            }

            .btn-back {
                top: 15px;
                left: 15px;
            }

            .btn-unified {
                padding: 8px 14px;
                font-size: 0.85rem;
                min-height: 40px;
            }

            .modal {
                padding: 10px;
                box-sizing: border-box;
            }
            
            .modal-content {
                margin: 2% auto;
                padding: 20px;
                width: calc(100% - 20px);
                max-width: calc(100vw - 20px);
                max-height: 90vh;
                border-radius: 20px;
                box-sizing: border-box;
            }
            
            .modal-image {
                max-height: 250px;
                margin-bottom: 15px;
                border-radius: 12px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .close {
                top: 10px;
                right: 15px;
                font-size: 30px;
            }
        }

        @media (max-width: 480px) {
            .modal {
                padding: 5px;
                box-sizing: border-box;
            }
            
            .modal-content {
                margin: 1% auto;
                padding: 15px;
                width: calc(100% - 10px);
                max-width: calc(100vw - 10px);
                max-height: 95vh;
                border-radius: 15px;
                box-sizing: border-box;
                overflow-x: hidden;
                word-wrap: break-word;
            }
            
            .modal-image {
                max-height: 200px;
                margin-bottom: 12px;
                border-radius: 10px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .close {
                top: 8px;
                right: 12px;
                font-size: 28px;
            }
            
            .date-title {
                font-size: 1.1rem !important;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .date-info {
                font-size: 0.9rem !important;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .date-description {
                font-size: 0.85rem !important;
                word-wrap: break-word;
                overflow-wrap: break-word;
                line-height: 1.4;
            }
        }

        /* Extra small screens */
        @media (max-width: 360px) {
            .modal {
                padding: 2px;
            }
            
            .modal-content {
                margin: 0.5% auto;
                padding: 12px;
                width: calc(100% - 4px);
                max-width: calc(100vw - 4px);
                max-height: 97vh;
                border-radius: 12px;
            }
            
            .close {
                top: 5px;
                right: 8px;
                font-size: 26px;
            }
            
            .modal-image {
                max-height: 180px;
                margin-bottom: 10px;
                border-radius: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="sparkle"><img src="Images/sparkles_3d.png" alt="Sparkle" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>
    <div class="sparkle"><img src="Images/star_3d.png" alt="Star" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>
    <div class="sparkle"><img src="Images/sparkles_3d.png" alt="Sparkle" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>
    <div class="sparkle"><img src="Images/star_3d.png" alt="Star" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>
    <div class="sparkle"><img src="Images/sparkles_3d.png" alt="Sparkle" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>
    <div class="sparkle"><img src="Images/star_3d.png" alt="Star" style="height: 1.3em; width: auto; vertical-align: text-bottom;"></div>

    <div class="container">
        <a href="index.html" class="btn-unified btn-back">
            ← <span id="back-text">Back</span>
        </a>
        
        <div class="language-selector">
            <button class="btn-unified active" data-lang="en">English</button>
            <button class="btn-unified" data-lang="nl">Nederlands</button>
        </div>

<a href="index.html" style="text-decoration: none; display: block;">
    <div class="heart">
        <img src="Images/sparkling_heart_3d.png" alt="Sparkling Heart" style="height: 2.3em; width: auto; vertical-align: text-bottom;">
    </div>
</a>

        <h1 id="title">Our Beautiful Dates</h1>
        <p id="subtitle" class="subtitle">Precious memories together</p>
        
        <div class="dates-grid" id="dates-grid">
            <!-- Date cards will be dynamically generated -->
        </div>

        <!-- Modal for viewing full-size images -->
        <div id="imageModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDescription">
            <div class="modal-content">
                <span class="close" aria-label="Close modal">&times;</span>
                <img id="modalImage" class="modal-image" src="" alt="" loading="lazy">
                <h2 id="modalTitle" class="date-title"></h2>
                <p id="modalDate" class="date-info"></p>
                <p id="modalLocation" class="date-info"></p>
                <p id="modalDescription" class="date-description"></p>
            </div>
        </div>

        <div class="floating-hearts" aria-hidden="true"></div>
        <div id="heart-cursor">💕</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                en: {
                    title: "Our Beautiful Dates",
                    subtitle: "Precious memories together",
                    back: "Back",
                    noImage: "No image yet",
                    comingSoon: "Coming soon..."
                },
                nl: {
                    title: "Onze Prachtige Dates",
                    subtitle: "Kostbare herinneringen samen",
                    back: "Terug",
                    noImage: "Nog geen foto",
                    comingSoon: "Binnenkort..."
                }
            };

            // Date data with validation and fallbacks
            const dates = [
                {
                    id: 1,
                    title: { en: "First Date", nl: "Eerste Date" },
                    date: "June 29, 2025",
                    dateNl: "29 juni 2025",
                    location: { en: "Rotterdam", nl: "Rotterdam" },
                    description: { 
                        en: "Our first date was really something special. We started at that coffee place with the most awkward little table, but it was fun anyway. Then the arcade was a blast, and finishing up with a nice chat in the park made it all feel natural.", 
                        nl: "Onze eerste date was echt bijzonder. We begonnen bij dat koffietentje met het meest ongemakkelijke kleine tafeltje, maar het was alsnog leuk. Daarna was de arcade super gezellig en afsluiten met een fijn gesprek in het park maakte het helemaal natuurlijk" 
                    },
                    image: "Images/Date_1.png",
                    hasImage: true
                },
                {
                    id: 2,
                    title: { en: "Soju Bar", nl: "Soju Bar" },
                    date: "July 5, 2025",
                    dateNl: "5 juli 2025",
                    location: { en: "Breda", nl: "Breda" },
                    description: { 
                        en: "Exploring Breda with you just felt easy and special. Walking through stores together and trying out different fragrances was actually so fun. It was also the first time I gave you flowers, which made the day even more memorable. And sitting down at Soju Bar after all that, it was the kind of moment that just made me smile.",
                        nl: "Breda met jou verkennen voelde gewoon makkelijk en speciaal. Samen door winkeltjes lopen en verschillende geuren uitproberen was echt zo leuk. Het was ook de eerste keer dat ik je bloemen gaf, wat de dag nog gedenkwaardiger maakte. En toen we daarna neerzaten bij Soju Bar, was dat zo'n moment waar ik alleen maar van kon glimlachen."
                    },
                    image: "Images/Date_2.png",
                    hasImage: true
                },
                {
                    id: 3,
                    title: { en: "Diergaarde Blijdorp", nl: "Diergaarde Blijdorp" },
                    date: "July 17, 2025",
                    dateNl: "17 juli 2025",
                    location: { en: "Rotterdam", nl: "Rotterdam" },
                    description: { 
                        en: "Going to Diergaarde Blijdorp with you was already such a good day and that little matcha café after made it even more fun. But asking you to be my girlfriend that evening... that made it perfect.", 
                        nl: "Samen naar Diergaarde Blijdorp gaan was al zo'n leuke dag en dat schattige matcha café daarna maakte het alleen maar beter. Maar jou die avond vragen om mijn vriendin te zijn... dat maakte alles perfect." 
                    },
                    image: "Images/Date_3.png",
                    hasImage: true
                },
                {
                    id: 4,
                    title: { en: "Gym and Art Date", nl: "Gym and Art Date" },
                    date: "July 22, 2025",
                    dateNl: "22 juli 2025",
                    location: { en: "Made", nl: "Made" },
                    description: { 
                        en: "We cooked together, we drew side by side, and we explored a quiet little nature park that felt like our own world. That was the day of our first kiss gentle, warm, and unforgettable. You gave me a custom flower and the sweetest drawing, and I couldn't stop smiling. Every part of that day felt truly special.", 
                        nl: "We kookten samen, we tekenden zij aan zij, en we verkenden een rustig klein natuurpark dat aanvoelde als onze eigen wereld. Dat was de dag van onze eerste kus zacht, warm en onvergetelijk. Je gaf me een zelfgemaakte bloem en de liefste tekening, en ik kon niet stoppen met glimlachen. Elk moment van die dag voelde echt speciaal." 
                    },
                    image: "Images/Date_4.png",
                    hasImage: true
                },
                {
                    id: 5,
                    title: { en: "Botanical Garden", nl: "Botanische Tuin" },
                    date: "August 10, 2025",
                    dateNl: "10 Augustus 2025",
                    location: { en: "Rotterdam", nl: "Rotterdam" },
                    description: { 
                    en: "Our first date after you came back from vacation… I had missed you so much and couldn’t wait to see you again. You showed me one of your favorite places in Rotterdam, a place that was incredibly beautiful but the most beautiful thing I had brought with me, you.", 
                    nl: "Onze eerste date nadat je terugkwam van vakantie… Ik had je zo enorm gemist en kon niet wachten om je weer te zien. Je liet me een van je favoriete plekken in Rotterdam zien, een plek die ontzettend mooi was maar het allermooiste had ik zelf meegenomen, jij." 
                    },
                    image: "Images/Date_6 Botanical Garden.jpg",
                    hasImage: true,
                },
                {
                    id: 6,
                    title: { en: "I love you, Amélie", nl: "Ik hou van jou, Amélie" },
                    date: "August 17th to the 21st of August",
                    dateNl: "17 tot en met 21 augustus",
                    location: { en: "Rotterdam, Made, Wageningen en Amstedam", nl: "Rotterdam, Made, Wageningen en Amsterdam" },
                    description: { 
                    en: "I can’t believe a month has already passed since you became the brightest star in my life, my girlfriend. At first, we agreed to spend only two evenings together, but those two became four… and before I knew it, I was blessed with five beautiful days in a row by your side. In all that time, the longest we were apart was just 17 minutes. I love you, Amélie.", 
                    nl: "Ik kan niet geloven dat er al een maand is voorbij gegaan sinds jij de helderste ster in mijn leven werd, mijn vriendin. Oorspronkelijk hadden we afgesproken om slechts twee avonden samen door te brengen, maar die twee werden er vier… en voor ik het wist, werd ik vijf prachtige dagen achter elkaar aan jouw zijde gezegend. In al die tijd was het langste dat we van elkaar gescheiden waren slechts 17 minuten. Ik hou van je, Amélie." 
                    },
                    image: "Images/Date_6.jpg",
                    hasImage: true,
                },
                {
    id: 7,
    title: { en: "Your favorite place became my favorite place.", nl: "Jouw favoriete plek is mijn favoriete plek geworden." },
    date: "August",
    dateNl: "Augustus",
    location: { en: "Rotterdam", nl: "Rotterdam" },
    description: { 
        en: "For the first time, I went to your home and met your family such warm and kind people. Then you led me to one of your most beautiful places, and it felt as if I got to keep a little piece of your world in my heart.", 
        nl: "Voor het eerst ging ik naar je huis en ontmoette ik je familie, zulke warme en lieve mensen. Daarna leidde je me naar een van je mooiste plekjes, en het voelde alsof ik een stukje van jouw wereld in mijn hart mocht bewaren." 
    },
    image: "Images/Date_7.jpg",
    hasImage: true,
                },
{
    id: 8,
    title: { en: "Best Coffee Ever", nl: "Best Coffee Ever" },
    date: "August 29, 2025",
    dateNl: "29 Augustus 2025",
    location: { en: "Amsterdam", nl: "Amsterdam" },
    description: { 
        en: "The second time in Amsterdam felt magical, this time with a more thoughtful plan. We went to Haku, and it quickly became my favorite coffee spot a little corner of the city now forever tied to you.", 
        nl: "De tweede keer in Amsterdam voelde magisch, dit keer met een iets beter doordacht plan. We gingen naar Haku, dat al snel mijn favoriete koffietentje werd een klein hoekje van de stad dat voor altijd met jou verbonden is." 
    },
    image: "Images/Date_8.jpg",
    hasImage: true,
},
{
    id: 9,
    title: { en: "Coming Soon", nl: "Binnenkort" },
    date: "",
    dateNl: "",
    location: { en: "TBD", nl: "Nog te bepalen" },
    description: { 
        en: "Future adventures await us. The story of us keeps getting better.", 
        nl: "Toekomstige avonturen wachten op ons. Ons verhaal wordt steeds mooier." 
    },
    image: "",
    hasImage: false,
    isUpcoming: true
}

            ];

            let currentLanguage = localStorage.getItem('preferred-language') || 'en';
            const heartCursor = document.getElementById('heart-cursor');
            const floatingHeartsContainer = document.querySelector('.floating-hearts');
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDate = document.getElementById('modalDate');
            const modalLocation = document.getElementById('modalLocation');
            const modalDescription = document.getElementById('modalDescription');
            const closeModal = document.querySelector('.close');
            let heartsInterval;

            // Debounced heart creation for performance
            let heartCreationTimeout;
            function createHeart() {
                if (heartCreationTimeout) return;
                
                heartCreationTimeout = setTimeout(() => {
    const hearts = [
      '<img src="Images/sparkling_heart_3d.png" alt="Sparkling Heart" style="height: 1em; width: auto; vertical-align: text-bottom;">', // 💖
      '<img src="Images/two_hearts_3d.png" alt="Two Hearts" style="height: 1em; width: auto; vertical-align: text-bottom;">',         // 💕
      '<img src="Images/growing_heart_3d.png" alt="Growing Heart" style="height: 1em; width: auto; vertical-align: text-bottom;">',   // 💗
      '<img src="Images/beating_heart_3d.png" alt="Beating Heart" style="height: 1em; width: auto; vertical-align: text-bottom;">',   // 💓
      '<img src="Images/heart_with_ribbon_3d.png" alt="Heart Ribbon" style="height: 1em; width: auto; vertical-align: text-bottom;">', //💝
      '<img src="Images/heart_with_arrow_3d.png" alt="Heart Arrow" style="height: 1em; width: auto; vertical-align: text-bottom;">', //💘
      '<img src="Images/love_letter_3d.png" alt="Love Letter" style="height: 1em; width: auto; vertical-align: text-bottom;">', // 💌
      '<img src="Images/heart_decoration_3d.png" alt="Heart Decoration" style="height: 1em; width: auto; vertical-align: text-bottom;">' // 💟
    ];
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = (5 + Math.random() * 3) + 's';
                    heart.style.fontSize = (12 + Math.random() * 20) + 'px';
heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];

                    floatingHeartsContainer.appendChild(heart);
                    setTimeout(() => {
                        if (heart && heart.parentNode) {
                            heart.remove();
                        }
                    }, 8000);
                    
                    heartCreationTimeout = null;
                }, 100);
            }

            function updateLanguage(lang) {
                if (!translations[lang]) return;
                
                currentLanguage = lang;
                localStorage.setItem('preferred-language', lang);
                const t = translations[lang];

                // Batch DOM updates
                requestAnimationFrame(() => {
                    document.getElementById('title').textContent = t.title;
                    document.getElementById('subtitle').textContent = t.subtitle;
                    document.getElementById('back-text').textContent = t.back;

                    document.querySelectorAll('.btn-unified').forEach(btn => {
                        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
                    });

                    renderDates();
                });
            }

            function renderDates() {
                const grid = document.getElementById('dates-grid');
                const fragment = document.createDocumentFragment();

                dates.forEach(date => {
                    const dateCard = document.createElement('div');
                    dateCard.className = 'date-card';
                    
                    const imageContent = date.hasImage && date.image 
                        ? `<img class="date-image" src="${date.image}" alt="${date.title[currentLanguage] || 'Date image'}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">`
                        : '';
                    
                    const placeholderContent = !date.hasImage || !date.image 
                        ? `<div class="date-image">${date.isUpcoming ? '<img src="Images/calendar_3d.png" alt="Calendar" style="height: 1.2em; width: auto; vertical-align: text-bottom; opacity: 0.5;">' : '<img src="Images/camera_with_flash_3d.png" alt="Camera" style="height: 1.2em; width: auto; vertical-align: text-bottom; opacity: 0.5;">'}</div>`
                        : `<div class="date-image" style="display:none">${date.isUpcoming ? '<img src="Images/calendar_3d.png" alt="Calendar" style="height: 1.2em; width: auto; vertical-align: text-bottom; opacity: 0.5;">' : '<img src="Images/camera_with_flash_3d.png" alt="Camera" style="height: 1.2em; width: auto; vertical-align: text-bottom;">'}</div>`;

                    dateCard.innerHTML = `
                        ${imageContent}
                        ${placeholderContent}
                        <div class="date-title">${date.title[currentLanguage] || ''}</div>
                        <div class="date-info">${(currentLanguage === 'en' ? date.date : date.dateNl) || (date.isUpcoming ? translations[currentLanguage].comingSoon : '')}</div>
                        <div class="date-info">${date.location[currentLanguage] || ''}</div>
                        <div class="date-description">${date.description[currentLanguage] || ''}</div>
                    `;

                    // Only add click handler for cards with actual content
                    if (!date.isUpcoming || date.hasImage) {
                        dateCard.addEventListener('click', () => openModal(date));
                    }

                    fragment.appendChild(dateCard);
                });

                grid.innerHTML = '';
                grid.appendChild(fragment);
            }

            function openModal(date) {
                if (!date) return;
                
                modalImage.src = date.image || '';
                modalImage.alt = date.title[currentLanguage] || 'Date image';
                modalTitle.textContent = date.title[currentLanguage] || '';
                modalDate.textContent = (currentLanguage === 'en' ? date.date : date.dateNl) || '';
                modalLocation.textContent = date.location[currentLanguage] || '';
                modalDescription.textContent = date.description[currentLanguage] || '';
                
                modal.style.display = 'block';
                createHeart();
                
                // Focus management for accessibility
                closeModal.focus();
            }

            function closeModalHandler() {
                modal.style.display = 'none';
            }

            // Event listeners with proper error handling
            document.querySelectorAll('.btn-unified').forEach(btn => {
                btn.addEventListener('click', e => {
                    // Only prevent default for language buttons, not the back button
                    const lang = btn.getAttribute('data-lang');
                    if (lang && translations[lang]) {
                        e.preventDefault();
                        updateLanguage(lang);
                    }
                    // Let the back button (link) navigate normally without preventDefault
                });
            });

            // Modal event listeners
            closeModal.addEventListener('click', closeModalHandler);

            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModalHandler();
                }
            });

            // Close modal on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeModalHandler();
                }
            });

            function startHearts() {
                if (heartsInterval) clearInterval(heartsInterval);
                heartsInterval = setInterval(createHeart, 800);
            }

            function stopHearts() {
                if (heartsInterval) {
                    clearInterval(heartsInterval);
                    heartsInterval = null;
                }
            }

            // Optimized mouse cursor handling
            if (!('ontouchstart' in window) && window.matchMedia('(hover: hover) and (pointer: fine)').matches) {
                let mouseX = 0, mouseY = 0;
                let animationFrame;

                function updateCursor() {
                    if (heartCursor) {
                        heartCursor.style.left = mouseX + 'px';
                        heartCursor.style.top = mouseY + 'px';
                    }
                    animationFrame = null;
                }

                window.addEventListener('mousemove', e => {
                    mouseX = e.clientX;
                    mouseY = e.clientY;
                    
                    if (!animationFrame) {
                        animationFrame = requestAnimationFrame(updateCursor);
                    }
                });

                const scaleUp = () => heartCursor?.style.setProperty('transform', 'translate(-50%, -50%) scale(1.5) rotate(15deg)');
                const scaleDown = () => heartCursor?.style.setProperty('transform', 'translate(-50%, -50%) scale(1) rotate(0deg)');

                window.addEventListener('mousedown', scaleUp);
                window.addEventListener('mouseup', scaleDown);

                // Handle cursor for interactive elements
                document.querySelectorAll('button, a, .date-card').forEach(element => {
                    element.addEventListener('mouseenter', () => {
                        if (heartCursor) heartCursor.style.display = 'none';
                        element.style.cursor = 'pointer';
                    });
                    element.addEventListener('mouseleave', () => {
                        if (heartCursor) heartCursor.style.display = 'block';
                    });
                });
            } else {
                if (heartCursor) heartCursor.style.display = 'none';
                document.body.style.cursor = 'default';
            }

            // Performance: Pause hearts when page is hidden
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    stopHearts();
                } else {
                    startHearts();
                }
            });

            // Initialize with saved language preference
            updateLanguage(currentLanguage);
            startHearts();
        });
    </script>
</body>
</html>
